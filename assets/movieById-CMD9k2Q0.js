import{A as l,a as f,t as n,r as i,u,b as j,f as p,c as b,j as s,P as d,M as y,d as I}from"./index-BdJF97gq.js";import{I as A}from"./Image-bhGwEXFH.js";import{M as _,B as k}from"./movieInfo-CX5n54ak.js";import{A as D}from"./AnimatabelItem-BGNLbUV7.js";const E="caa5de32",F="https://www.omdbapi.com",M=async t=>{try{const{data:e}=await f.get(`${F}/?apikey=${E}&i=${t}`);return e}catch(e){if(e instanceof l)return e}},B=async(t,e,o)=>{o(null);const a=await M(t);a instanceof l?o(a.message):a&&e(a)},N=(t,e)=>{t?n.success("ADDED TO FAVORITES!",`${e}`,{progressBar:!0,className:"addfavortoastr"}):n.error("FAVORITES","ADDED!",{progressBar:!0,className:"addfavortoastr"})},g=i.memo(({dataLoad:t})=>{const[e,o]=i.useState(!0),a=u(),c=j(r=>r.favor.movieId),m=i.useCallback(r=>{a(p.AddMovie(r.imdbID)),a(b.AddMovie(r)),o(!1)},[t]),v=i.useCallback((r,h)=>{const x=h.includes(r.imdbID);o(!x)},[t,c]);return i.useEffect(()=>{setTimeout(()=>{t&&v(t,c)})},[t,e]),t?s.jsxs("div",{className:"moviebyid__like",onClick:()=>{m(t),N(e,t.Title)},children:[s.jsx("h2",{style:e?{color:"white"}:{},children:s.jsx(y,{name:"MdFavorite"})}),s.jsxs("p",{children:[s.jsx("span",{children:"f"}),"avorites"]})]}):s.jsx(s.Fragment,{children:s.jsx(d,{})})}),C=i.memo(()=>{const{id:t}=I(),[e,o]=i.useState(null),[a,c]=i.useState(null);return i.useEffect(()=>{t&&B(t,o,c)},[t]),e?s.jsxs(D,{className:"moviebyid",children:[s.jsx("h2",{children:e.Title}),s.jsxs("div",{className:"moviebyid__infobox",children:[s.jsx("div",{className:"moviebyid__poster",children:s.jsx(A,{src:e.Poster,alt:e.Title,height:"100%"})}),s.jsxs("div",{className:"moviebyid__info",children:[s.jsx("h3",{children:e.Type}),s.jsx(_,{dataLoad:e})]})]}),s.jsx("div",{className:"moviebyid__plot",children:s.jsx("p",{children:e.Plot})}),s.jsxs("div",{className:"moviebyid__btnbox",children:[s.jsx(g,{dataLoad:e}),s.jsx(k,{})]})]}):s.jsxs(s.Fragment,{children:[a&&s.jsx("h3",{children:a}),s.jsx(d,{})]})});export{C as default};
