import{A as m,a as p,t as v,u as b,r as t,b as y,c as I,f as _,d as A,j as e,P as D,I as k,M as E}from"./index-BGTdml55.js";import{M,B as F}from"./movieInfo-D6watfsZ.js";const N="caa5de32",g="https://www.omdbapi.com",B=async a=>{try{const{data:s}=await p.get(`${g}/?apikey=${N}&i=${a}`);return s}catch(s){if(s instanceof m)return s}},T=async(a,s,r)=>{r(null);const o=await B(a);o instanceof m?r(o.message):o&&s(o)},P=(a,s)=>{a?v.success("ADDED TO FAVORITES!",`${s}`,{progressBar:!0,className:"addfavortoastr"}):v.error("FAVORITES","ADDED!",{progressBar:!0,className:"addfavortoastr"})};function L(){const{id:a}=b(),[s,r]=t.useState(null),[o,h]=t.useState(null),[c,n]=t.useState(!0),d=y(i=>i.favor.movieId),l=I(),x=t.useCallback((i,f)=>{const j=f.includes(i.imdbID);n(!j)},[s,d]),u=t.useCallback(i=>{l(_.AddMovie(i.imdbID)),l(A.AddMovie(i)),n(!1)},[s]);return t.useEffect(()=>{console.log(c),setTimeout(()=>{s&&x(s,d)})},[s,c]),t.useEffect(()=>{a&&T(a,r,h)},[a]),s?e.jsxs("div",{className:"moviebyid",children:[e.jsx("h2",{children:s.Title}),e.jsxs("div",{className:"moviebyid__infobox",children:[e.jsx("div",{className:"moviebyid__poster",children:e.jsx(k,{src:s.Poster,alt:s.Title,height:"100%"})}),e.jsxs("div",{className:"moviebyid__info",children:[e.jsx("h3",{children:s.Type}),e.jsx(M,{dataLoad:s})]})]}),e.jsx("div",{className:"moviebyid__plot",children:e.jsx("p",{children:s.Plot})}),e.jsxs("div",{className:"moviebyid__btnbox",children:[e.jsxs("div",{className:"moviebyid__like",onClick:()=>{u(s),P(c,s.Title)},children:[e.jsx("h2",{style:c?{color:"white"}:{},children:e.jsx(E,{name:"MdFavorite"})}),e.jsxs("p",{children:[e.jsx("span",{children:"f"}),"avorites"]})]}),e.jsx(F,{})]})]}):e.jsxs(e.Fragment,{children:[o&&e.jsx("h3",{children:o}),e.jsx(D,{})]})}export{L as default};
