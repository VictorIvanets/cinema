import{A as m,a as j,u as p,r as t,b,c as y,f as _,d as I,j as s,P as k,I as M,M as A}from"./index-4JuXVryl.js";import{M as N,B as P}from"./movieInfo-KzNAT1bg.js";const w="caa5de32",B="https://www.omdbapi.com",E=async a=>{try{const{data:e}=await j.get(`${B}/?apikey=${w}&i=${a}`);return e}catch(e){if(e instanceof m)return e}},g=async(a,e,c)=>{c(null);const i=await E(a);i instanceof m?c(i.message):i&&e(i)};function L(){const{id:a}=p(),[e,c]=t.useState(null),[i,v]=t.useState(null),[n,r]=t.useState(!0),d=b(o=>o.favor.movieId),l=y(),h=t.useCallback((o,f)=>{const u=f.includes(o.imdbID);r(!u)},[e,d]),x=t.useCallback(o=>{l(_.AddMovie(o.imdbID)),l(I.AddMovie(o)),r(!1)},[e]);return t.useEffect(()=>{setTimeout(()=>{e&&h(e,d)})},[e,n]),t.useEffect(()=>{a&&g(a,c,v)},[a]),e?s.jsxs("div",{className:"moviebyid",children:[s.jsx("h2",{children:e.Title}),s.jsxs("div",{className:"moviebyid__infobox",children:[s.jsx("div",{className:"moviebyid__poster",children:s.jsx(M,{src:e.Poster,alt:e.Title,height:"100%"})}),s.jsxs("div",{className:"moviebyid__info",children:[s.jsx("h3",{children:e.Type}),s.jsx(N,{dataLoad:e})]})]}),s.jsx("div",{className:"moviebyid__plot",children:s.jsx("p",{children:e.Plot})}),s.jsxs("div",{className:"moviebyid__btnbox",children:[s.jsxs("div",{className:"moviebyid__like",onClick:()=>x(e),children:[s.jsx("h2",{style:n?{color:"white"}:{},children:s.jsx(A,{name:"MdFavorite"})}),s.jsxs("p",{children:[s.jsx("span",{children:"f"}),"avorites"]})]}),s.jsx(P,{})]})]}):s.jsxs(s.Fragment,{children:[i&&s.jsx("h3",{children:i}),s.jsx(k,{})]})}export{L as default};
